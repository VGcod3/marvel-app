"use strict";(self.webpackChunkmarvel_world=self.webpackChunkmarvel_world||[]).push([[364],{227:function(t,e,n){n.d(e,{Z:function(){return c}});n(791);var r=n.p+"static/media/error.42292aa12b6bc303ce99.gif",a=n(184),c=function(){return(0,a.jsx)("img",{id:"errorImage",src:r,alt:"OOOOOPS, there there is not a chaaracter with this ID"})}},560:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(671),a=n(144),c=n(340),i=n(716),o=n(791),s=n(227),u=n(184),l=function(t){(0,c.Z)(n,t);var e=(0,i.Z)(n);function n(){var t;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={error:!1},t}return(0,a.Z)(n,[{key:"componentDidCatch",value:function(t,e){console.log(t,e),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,u.jsx)(s.Z,{}):this.props.children}}]),n}(o.Component)},798:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var r=n(791),a=n(982),c=n(885),i=n(504),o=n(764),s=n(227),u=n(415),l=n(387),f=n(35),d=n(184),p=function(){return(0,d.jsxs)("div",{className:"ad",children:[(0,d.jsxs)("div",{className:"begin",children:[(0,d.jsx)("img",{className:"avengers",src:l,alt:"logo"}),(0,d.jsxs)("span",{className:"label",children:["New comics every week ",(0,d.jsx)("br",{}),"Stay tuned!"]})]}),(0,d.jsx)("img",{className:"avengersLogo",src:u,alt:"logo"})]})},m=n(889),h=function(){var t=(0,r.useState)([]),e=(0,c.Z)(t,2),n=e[0],u=e[1],l=(0,r.useState)(210),h=(0,c.Z)(l,2),v=h[0],g=h[1],b=(0,r.useState)(!1),y=(0,c.Z)(b,2),x=y[0],w=y[1],k=(0,r.useRef)(v);k.current=v;var Z=(0,f.Z)(),j=Z.loading,N=Z.error,_=(Z.getComics,Z.getAllComics),C=(0,m.v)(I),S=C.newItemLoading,E=C.setNewItemLoading;function I(t){E(!t),_(8,k.current).then(A)}function A(t){var e=!1;t.length<8&&(e=!0),u((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(t))})),E(!1),g((function(t){return t+8})),w(e)}var O=function(t){var e=t.map((function(t,e){return(0,d.jsx)("li",{className:"comics__item",children:(0,d.jsxs)(i.rU,{to:"/comics/".concat(t.id),children:[(0,d.jsx)("img",{src:t.thumbnail,alt:"ultimate war",className:"comics__item-img"}),(0,d.jsx)("div",{className:"comics__item-name",children:t.title}),(0,d.jsx)("div",{className:"comics__item-price",children:t.price})]})},e)}));return(0,d.jsx)("ul",{className:"comics__grid",children:e})}(n),T=N?(0,d.jsx)(s.Z,{}):null,L=j&&!S?(0,d.jsx)(o.Z,{}):null;return(0,d.jsxs)("div",{className:"comics__list",children:[(0,d.jsx)(p,{}),T,L,O,(0,d.jsx)("button",{disabled:S,style:{display:x?"none":"block"},onClick:function(){return I()},className:"button button__main button__long",children:(0,d.jsx)("div",{className:"inner",children:"load more"})})]})},v=n(560),g=function(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(v.Z,{children:(0,d.jsx)(h,{})})})}},889:function(t,e,n){n.d(e,{v:function(){return c}});var r=n(885),a=n(791),c=function(t){var e=(0,a.useState)(!0),n=(0,r.Z)(e,2),c=n[0],i=n[1];(0,a.useEffect)((function(){return window.addEventListener("scroll",o),function(){return window.removeEventListener("scroll",o)}}),[]),(0,a.useEffect)((function(){c&&t()}),[c]);var o=function(){window.innerHeight+window.pageYOffset+1e3>=document.body.offsetHeight&&i(!0)};return{newItemLoading:c,setNewItemLoading:i}}},35:function(t,e,n){n.d(e,{Z:function(){return d}});var r=n(861),a=n(757),c=n.n(a),i=n(885),o=n(791),s=n(671),u=n(144),l=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:localStorage;(0,s.Z)(this,t),this.isEmpty=function(){return!n.get()},this.key=e,this.storageType=a,this.expire=r}return(0,u.Z)(t,[{key:"set",value:function(t){this.storageType.setItem(this.key,JSON.stringify(t))}},{key:"get",value:function(){return JSON.parse(this.storageType.getItem(this.key))}},{key:"clear",value:function(){this.storageType.setItem(this.key,null)}}]),t}(),f=l,d=function(){var t=function(){var t=(0,o.useState)(!1),e=(0,i.Z)(t,2),n=e[0],a=e[1],s=(0,o.useState)(!1),u=(0,i.Z)(s,2),l=u[0],d=u[1],p=(0,o.useCallback)(function(){var t=(0,r.Z)(c().mark((function t(e){var n,r,i,o,s,u,l=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,i=l.length>3&&void 0!==l[3]?l[3]:{"content-type":"application/json"},a(!0),t.prev=4,!(o=new f("".concat(e))).isEmpty()){t.next=19;break}return t.next=9,fetch(e,{method:n,body:r,headers:i});case 9:if((s=t.sent).ok){t.next=12;break}throw Error("Could not fetch ".concat(e,", status: ").concat(s.status," "));case 12:return t.next=14,s.json();case 14:return u=t.sent,o.set(u),t.next=18,u;case 18:return t.abrupt("return",t.sent);case 19:return t.abrupt("return",o.get());case 22:throw t.prev=22,t.t0=t.catch(4),console.error(t.t0),d(t.t0.message),t.t0;case 27:return t.prev=27,a(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[4,22,27,30]])})));return function(e){return t.apply(this,arguments)}}(),[]);return{request:p,error:l,loading:n,clearError:(0,o.useCallback)((function(){d(null)}))}}(),e=t.loading,n=t.request,a=t.error,s=t.clearError,u="https://gateway.marvel.com:443/v1/public/",l="40ad5e34c59f99b7cf492065754a5e7d",d=function(){var t=(0,r.Z)(c().mark((function t(){var e,r,a=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:200,t.next=3,n("".concat(u,"characters?limit=9&offset=").concat(e,"&apikey=").concat(l));case 3:return r=t.sent,t.abrupt("return",r.data.results.map(g));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=(0,r.Z)(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("".concat(u,"characters/").concat(e,"?apikey=").concat(l));case 2:return r=t.sent,t.abrupt("return",g(r.data.results[0]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=(0,r.Z)(c().mark((function t(){var e,r,a,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:8,r=i.length>1&&void 0!==i[1]?i[1]:0,t.next=4,n("".concat(u,"/comics?noVariants=true&limit=").concat(e,"&offset=").concat(r,"&apikey=").concat(l));case 4:return a=t.sent,t.abrupt("return",a.data.results.map(v));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=(0,r.Z)(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("".concat(u,"comics/").concat(e,"?apikey=").concat(l));case 2:return r=t.sent,t.abrupt("return",v(r.data.results[0]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(t){return{id:t.id,title:t.title,description:t.description||"There is no description",pageCount:t.pageCount?"".concat(t.pageCount," p."):"No information about the number of pages",thumbnail:t.thumbnail.path+"."+t.thumbnail.extension,language:t.textObjects.language||"en-us",price:t.prices[0].price?"".concat(t.prices[0].price,"$"):"not available"}},g=function(t){var e=t.name,n=t.description,r=t.thumbnail,a=t.urls,c=t.id,i=t.comics;return{name:e,id:c,description:n?n.length>=210?n.slice(0,210)+"...":n:"There is no description for this character",thumbnail:"".concat(r.path,".").concat(r.extension),homepage:a[0].url,wiki:a[1].url,comics:i.items}};return{loading:e,error:a,getAllCharacters:d,getCharacter:p,clearError:s,getComics:h,getAllComics:m}}},387:function(t,e,n){t.exports=n.p+"static/media/Avengers.4065c8f9c94e3d8b039a.png"},415:function(t,e,n){t.exports=n.p+"static/media/Avengers_logo.9eaf219344d83362e830.png"},982:function(t,e,n){n.d(e,{Z:function(){return c}});var r=n(907);var a=n(181);function c(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,a.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=364.3436cf28.chunk.js.map